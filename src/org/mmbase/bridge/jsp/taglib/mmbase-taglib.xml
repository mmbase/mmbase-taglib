<!--
This "enhanced" tld file will be converted to a "normal" tld and a html file.

To convert this file to a standard .tld file you need  an xslt engine like xalan:
java org.apache.xalan.xslt.Process -Q -IN mmbase-taglib.xml -XSL xml2tld.xslt  > mmbase-taglib.tld

To convert this file to html documentation you need  an xslt engine:
java org.apache.xalan.xslt.Process -Q -IN mmbase-taglib.xml -XSL xml2html.xslt


The following additional tags are possible between <tag> and </tag>:

  <info>...</info>

  <example>...</example>


The following additional tags are possible between <attribute> and </attribute>:

  <requirednote></requirednote> (To note that requirement of this attribute
                                 is dependant on other conditions.)

  <info>...</info>

  <possiblevalue> (Use one or more to list a possible values)
    <value>...</value>
    <info>...</info>
  </possiblevalue>

  <examplevalue> (Use one ore more to give some example values)
    <value>...</value>
    <info>...</info>
  </examplevalue>

Use one or more possiblevalue tags if you want to list all possible values. Use
one or more examplevalue tags is you want to give some example values.
-->
<taglib>
  <tlibversion>1.0</tlibversion>
  <jspversion>1.1</jspversion>
  <shortname>mmbase</shortname>
  <uri></uri>
  <info>Tag library for MMBase based on MMCI(MMBase Cloud Interface).</info>
  <tag>
    <name>list</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.NodeListTag</tagclass>
    <teiclass>org.mmbase.bridge.jsp.taglib.NodeProviderTEI</teiclass>
    <bodycontent>JSP</bodycontent>
    <info>The list tag provides a syntax to list objects managed by MMBase.</info>
    <attribute>
      <name>nodes</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>Comma-separated list of nodes, this attribute defines the starting point of the list. The parameter is equivalent to node.</info>
    </attribute>
    <attribute>
      <name>node</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>Node number, or node alias. This attribute defines the starting point of the list.</info>
    </attribute>
    <attribute>
      <name>type</name>
      <required>true</required>
      <rtexprvalue>true</rtexprvalue>
      <info>A comma-separated list of NodeManagers and/or RelationManagers. The list forms a &quot;chain of relations&quot;</info>
      <examplevalue>
        <value>mags</value>
      </examplevalue>
      <examplevalue>
        <value>mags,news</value>
      </examplevalue>
      <examplevalue>
        <value>mags,related,news</value>
      </examplevalue>
      <examplevalue>
        <value>mags,news,images</value>
      </examplevalue>
      <examplevalue>
        <value>mags,related,news,related,images</value>
      </examplevalue>
    </attribute>
    <attribute>
      <name>fields</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>Comma-separated list of fields that should be made available in the page. The fields are selected from attributes of the corresponding  node managers defined in type. If the type fields contains more elements eg type=&quot;mags,news&quot; then it is required to append a prefix to each field listed eg fields=&quot;mags.title,news.title&quot;.In the jsp page the values are available in form of Strings eg mags.title is available as mags_title and can be accessed using &lt;%= mags_title &gt;.</info>
    </attribute>
    <attribute>
      <name>where</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>command</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
        On a non-multilevel list, you can also do a 'command'. The
        'getList(command)' method from the NodeManager interface will
        be called then.
      </info>
    </attribute>
    <attribute>
      <name>sorted</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
        The fields on which the result set must be sorted. 
      </info>
    </attribute>
    <attribute>
      <name>direction</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
        The direction of sorting.
      </info>
      <possiblevalue>
        <value>UP</value>
      </possiblevalue>
      <possiblevalue>
        <value>DOWN</value>
      </possiblevalue>
    </attribute>
    <attribute>
      <name>distinct</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>max</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>The maximum number of results.</info>
    </attribute>
    <attribute>
      <name>offset</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>The start index.</info>
    </attribute>
    <attribute>
      <name>search</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info></info>
    </attribute>
    <attribute>
      <name>id</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
        See the 'id' attribute of the Node tag. 
      </info>    
    </attribute>

<example>&lt;mm:list node="123" type="mags,news" fields="mags.title,news.number"&gt;
  &lt;mm:head&gt;magazine list&lt;/mm:head&gt;
  &lt;%= mags_title %&gt;
&lt;/mm:list&gt;</example>

  </tag>
  <tag>
    <name>related</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.macro.RelatedTag</tagclass>
    <teiclass>org.mmbase.bridge.jsp.taglib.NodeProviderTEI</teiclass>
    <bodycontent>JSP</bodycontent>
    <info>
        The list tag provides a syntax to list objects managed by MMBase
    </info>

    <attribute>
      <name>type</name>
      <required>true</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>fields</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>where</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>command</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>sorted</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>direction</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>distinct</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>max</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>offset</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>search</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
      <name>id</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
  </tag>
  <tag>
    <name>even</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.macro.ListEvenTag</tagclass>
    <bodycontent>JSP</bodycontent>
    <info>The tag can be used in a list to determine if this is an even item</info>
  </tag>
  <tag>
    <name>odd</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.macro.ListOddTag</tagclass>
    <bodycontent>JSP</bodycontent>
    <info>The tag can be used in a list to determine if this is an even item</info>
  </tag>
  <tag>
    <name>changed</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.macro.ListChangedTag</tagclass>
    <bodycontent>JSP</bodycontent>
    <info>The tag can be used in a list to determine if this is an even item</info>
  </tag>

  <tag>
    <name>head</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.macro.ListHeadTag</tagclass>
    <bodycontent>JSP</bodycontent>
    <info>The tag can be used in a list to determine if this is the fist item in the list.</info>
  </tag>
  <tag>
    <name>tail</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.macro.ListTailTag</tagclass>
    <bodycontent>JSP</bodycontent>
    <info>The tag can be used in a list to determine if this is the fist item in the list.</info>
  </tag>
  <tag>
    <name>cloud</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.CloudTag</tagclass>
    <teiclass>org.mmbase.bridge.jsp.taglib.CloudTEI</teiclass>
    <bodycontent>JSP</bodycontent>
    <info>The cloud tag initializes the cloud to use.</info>
    <attribute>
      <name>name</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>The name of the cloud.</info>
      <examplevalue>
        <value>mmbase</value>
      </examplevalue>
    </attribute>
    <attribute>
      <name>logon</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>The authentication name to use (account).</info>
    </attribute>
    <attribute>
      <name>pwd</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>The password to use to logon to the cloud.</info>
    </attribute>
    <attribute>
      <name>method</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
        Describes how to get the authentication information.
      </info>
      <possiblevalue>
        <value>http</value>
        <info>
          use http protocol to ask name and password
          from the user. If the 'logon' attribute is specified too, then
          logging on will fail if the user does not use that
          username. The 'pwd' attribute will be ignored.
        </info>
      </possiblevalue>
      <possiblevalue>
        <value>anonymous</value>
        <info>
          Ignore the 'logon' attribute and create (or
          reuse) a cloud with an anonymous user.
        </info>
      </possiblevalue>
      <possiblevalue>
        <value>asIs</value>
        <info>
          Ignore the 'logon' attribute and reuse the cloud as
          it is in the session.
        </info>
      </possiblevalue>
    </attribute>
    <attribute>
      <name>authenticate</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
        The authentitation module which must be used by the security
        system. The default is "name/password", which will do in most
        cases.
      </info>
    </attribute>
    <example>
&lt;!-- Show titles of all news articles from user kamer (which are in pool kamer_pool)  
only to user kamer --&gt;
&lt;mm:cloud logon="kamer" method="http"&gt;
logged on as: &lt;bean:write name="cloud" property="user.identifier" /&gt;&lt;br /&gt;
&lt;mm:node number="kamer_pool" id="my_node"&gt;
  &lt;mm:related type="news" sorted="number" direction="DOWN"&gt;
     &lt;mm:head&gt;
        &lt;!-- show a small heading, in which also appears the node-number of the pool --&gt;
        &lt;mm:field node="my_node" name="number" /&gt;:
        &lt;mm:field head="number" /&gt;: &lt;mm:field head="title" /&gt;&lt;br /&gt;
     &lt;/mm:head&gt;
     &lt;mm:field name="number" /&gt;: &lt;mm:field name="title" /&gt;&lt;br /&gt;
  &lt;/mm:related&gt;
&lt;/mm:node&gt;
&lt;/mm:list&gt;
&lt;/mm:cloud&gt;
    </example>
  </tag>
  <tag>
    <name>info</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.InfoTag</tagclass>
    <info>This tag can be used to call getInfo from Module (can also be done with mod) and NodeManager.</info>
    <bodycontent>JSP</bodycontent>
    <attribute>
        <name>nodeManager</name>
        <required>false</required>
	<rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <name>module</name>
        <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <name>id</name>
        <required>false</required>
      <rtexprvalue>true</rtexprvalue>
    </attribute>
  </tag>
  <tag>
    <name>node</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.NodeTag</tagclass>
    <teiclass>org.mmbase.bridge.jsp.taglib.NodeProviderTEI</teiclass>
    <info>
      A tag to make a node available. Normally it will enclose
      some field tags.
    </info>
    <attribute>
        <name>number</name>
        <required>false</required>
        <requirednote>Either 'number' or 'parameter' must be supplied.</requirednote>
        <rtexprvalue>true</rtexprvalue>
	<info>
	  The nodenumber or alias identifying this node in MMBase.
	</info>
    </attribute>
    <attribute>
        <name>parameter</name>
        <required>false</required>
        <requirednote>Either 'number' or 'parameter' must be supplied.</requirednote>
        <rtexprvalue>true</rtexprvalue>
	<info>
 	   The request parameter name which contains the nodenumber or
	   alias indentifying this node in MMBase.
	</info>
    </attribute>
    <attribute>
        <name>fields</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
	  The fields you want to have from this node. Other fields are
	  available as well, but will only be accessible with the
	  field-tag. Field indicated in this 'fields' attribute will
	  also get a jsp-variable.
	</info>
    </attribute>
    <attribute>
        <name>id</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
	  With the 'id' attribute you define an unique identifier for
	  this node. At the same time this defines an jsp 'Node'
	  variable with this name. If you have defined 'fields' too,
	  then these fields will have jsp-variables prefixed with this
	  id and an underscore.
        </info>	
    </attribute>    
  </tag>
  <tag>
    <name>field</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.FieldTag</tagclass>
    <info>
      Gets the field 'name' from node 'node' (can also be
      list).
    </info>
    <attribute>
        <name>node</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
          The 'id' of the node or list from which this field must be taken.
          By default this is the node or list which is enclosing this field.
        </info>
    </attribute>
    <attribute>
        <name>name</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
	  The name of the field to get. 
	</info>
    </attribute>
    <attribute>
        <name>head</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
	  Like 'name', but does not return the value of the field, but
	  the GUI-name of the field.
	</info>
    </attribute>
  </tag>
  <tag>
    <name>listCondition</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.ListConditionTag</tagclass>
    <info>
    Must be used in the body of a list tag. And the body of itself
    will only be evaluated if some condition is true.
    </info>
    <attribute>
        <name>value</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
	 The `value' of the condition, in other words what the
         condition is, described with a string. There is a limited set
         available now. They are also availabe as `macro'-tags on this
         tag.
	 </info>
        <possiblevalue>
          <value>first</value>
          <info>
            Show only in first row.
          </info>
        </possiblevalue>
        <possiblevalue>
          <value>last</value>
          <info>
            Show only in last row.
          </info>
        </possiblevalue>
        <possiblevalue>
          <value>odd</value>
          <info>
            Show only when row number is odd.
          </info>
        </possiblevalue>
        <possiblevalue>
          <value>even</value>
          <info>
            Show only when row number is even.
          </info>
        </possiblevalue>
        <possiblevalue>
          <value>changed</value>
          <info>
            Show only when this row differs from the previous row.
          </info>
        </possiblevalue>
    </attribute>
    <attribute>
        <name>inverse</name>
        <required>false</required>
        <rtexprvalue>false</rtexprvalue>
	<info>
	  Inverse the sense of the condition.
	</info>
    </attribute>
    <attribute>
        <name>list</name>
        <required>false</required>
        <rtexprvalue>false</rtexprvalue>
	<info>
	  The id of the list to which this condition must apply
	  to. Default it is the enclosing one.
        </info>
    </attribute>
  </tag>
  <tag>
    <name>nodefield</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.NodeFieldTag</tagclass>
    <info>
    Shows a field from a node without the need of use a node tag with a field tag in its body.
    </info>
    <attribute>
        <name>number</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <name>field</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
  </tag>
  <tag>
    <name>context</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.ContextTag</tagclass>
    <bodycontent>JSP</bodycontent>
    <info>
      <p>
      Groups node-tags. Tags inside a context tag can find each other's
      providing Node. You need this for example when you create a
      relation.
      </p>
      <p>
      In TCP this is called 'create'.
      </p>
      <p>
      A Transaction is a context too, so normally it will suffice to
      use a transaction.
      </p>
    </info>
  </tag>
  <tag>
    <name>createRelation</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.CreateRelationTag</tagclass>
    <info>
    Creates a relation between two nodes.
    </info>
    <attribute>
        <name>role</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
	<info>       
        </info>
    </attribute>
    <attribute>
        <name>source</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
         The id of the node which will be on the source side of the relation.
	</info>
    </attribute>
    <attribute>
        <name>destination</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
         The id of the node which will be on the source side of the relation.
	</info>
    </attribute>
    <example>
&lt;mm:cloud&gt;
&lt;mm:transaction id="my_transaction"&gt;
&lt;mm:createNode type="news" id="my_news"&gt;
   &lt;mm:setField name="title"&gt;Todays news&lt;/mm:setField&gt;
   &lt;mm:setField name="subtitle"&gt;There happened a lot today&lt;/mm:setField&gt;
&lt;/mm:createNode&gt;
&lt;mm:node number="1808" id="my_author" /&gt;
&lt;mm:createRelation role="author" source="my_author" destination="my_news" /&gt;
&lt;/mm:transaction&gt;
&lt;/mm:cloud&gt;
    </example>
  </tag>
  <tag>
    <name>createNode</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.CreateNodeTag</tagclass>
    <info>
    Creates a new node
    </info>
    <attribute>
        <name>type</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
	<info>   
         The type (NodeManager name) of the new node.
        </info>
        <examplevalue>
          <value>news</value>
        </examplevalue>
        <examplevalue>
          <value>people</value>
        </examplevalue>
    </attribute>
    <attribute>
      <name>id</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
        See the 'id' attribute of the Node tag. 
      </info>    
      <examplevalue>
        <value>a_new_node</value>
      </examplevalue>
    </attribute>
  </tag>
  <tag>
    <name>setField</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.SetFieldTag</tagclass>
    <info>
      Changes the field 'name' from node 'node' (can also be
      list).
    </info>
    <attribute>
        <name>node</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
          The 'id' of the node or list from which this field must be taken.
          By default this is the node or list which is enclosing this field.
        </info>
    </attribute>
    <attribute>
        <name>name</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
	<info>
	  The name of the field to set. 
	</info>
    </attribute>
  </tag>
  <tag>
    <name>transaction</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.TransactionTag</tagclass>
    <bodycontent>JSP</bodycontent>
    <info>
     The transaction tag creates a transaction. A transaction is
     a context too.
    </info>
    <attribute>
      <name>id</name>
      <required>true</required>
      <rtexprvalue>true</rtexprvalue>
      <info>The name of the transaction.</info>
      <examplevalue>
        <value>my_transaction</value>
      </examplevalue>
    </attribute>
    <attribute>
      <name>commitOnClose</name>
      <required>false</required>
      <rtexprvalue>true</rtexprvalue>
      <info>
       If the transaction must be committed after the body. The
       default is true.
      </info>
      <possiblevalue>
        <value>true</value>
      </possiblevalue>
      <possiblevalue>
        <value>false</value>
      </possiblevalue>
    </attribute>
  </tag>
  <tag>
    <name>deleteNode</name>
    <tagclass>org.mmbase.bridge.jsp.taglib.DeleteNodeTag</tagclass>
    <teiclass>org.mmbase.bridge.jsp.taglib.NodeProviderTEI</teiclass>
    <info>
      This tag extends the `node' tag, and is precisely the same. The
      only difference is that after the body the node will be removed.
    </info>
    <attribute>
        <name>number</name>
        <required>false</required>
        <requirednote>Either 'number' or 'parameter' must be supplied.</requirednote>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <name>parameter</name>
        <required>false</required>
        <requirednote>Either 'number' or 'parameter' must be supplied.</requirednote>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <name>fields</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>
    <attribute>
        <name>id</name>
        <required>false</required>
        <rtexprvalue>true</rtexprvalue>
    </attribute>    
  </tag>
</taglib>
